# 计算机系统

## 系统方向学啥
简单来说，系统方向学的就是如何造一台计算机。在数电&ICS中我们已经知道了计算机系统以ISA作为接口，区分了软件和硬件的职能。

硬件需要实现ISA中向软件承诺的内容，比如指令集、冯诺依曼体系结构等等；软件通过ISA提供的接口组合实现各种程序。

那么分别按照ISA的约定实现硬件和软件，然后通过ISA这个接口拼接起来，就能实现一台计算机。

针对硬件，同学们已经有了数电、计组的基础，已经掌握了单周期CPU、简单五段流水线CPU等一些ISA的实现方案。在系统方向的课程中，将继续学习《计算机体系结构》这门课程，这门课程将介绍现代计算机中更加高效的硬件实现方案。

针对软件，同学们已经有了深厚的编程基础，也学习了OS这样的基础软件的实现。但我们绝大部分时候使用的都是高级语言编程，通过编译器作为中介来和ISA打交道，在系统方向的《编译原理》课程中将补上中间这一环。

除了两门基础课程外，最新的系统方向还设置了一门《智能计算系统》。这门课的定位更贴近一门应用课程，这门课程中同学们讲看到计算机系统的知识是如何应用到一个具体领域的计算机系统上，从而多快好省地让应用运行起来的。

除了三门核心课外，针对系统方向还有一门计算机系统大实验。在这门实验课上，同学们将可以通过一学期+暑假两到三周的努力，利用学到的计算机系统知识，真正造出一台能运行起各种程序、包括OS的计算机。

## 为啥要学系统

现代计算机系统通过良好的封装，从基础电路到上层应用被分成了一层层黑盒，应用开发程序员只需要知道操作系统提供的接口，不需要知道操作系统的具体实现，更不需要知道ISA实现的电路。

“当东西好用的时候，没有人会在意黑盒里面是怎样的。”过去几十年，受益于芯片制造工艺的进步，一个程序不需要程序员做任何优化，自然就会因为硬件的提升而有更高的运行效率。但随着物理限制的逼近，摩尔定律走向终结。更进一步的程序优化要求程序员打开黑盒知道编译器将会将自己的程序转译成怎样的指令，这些指令在硬件上是怎么被执行的，从而从硬件执行指令的视角挤压程序运行的效率。另外一方面，现代计算机为了提升某些计算的性能，融入了许多专用处理器（如GPU）。这些专用处理器提供给程序员的编程模型往往不同于传统的CPU，例如在使用GPU或现代CPU的一些并行处理部件进行运算时，有时为了减少总体的运算时间，我们反而会增加程序的运算量。这意味着，更加熟悉计算机系统的程序员能够写出更加高效的程序。

除了作为一般的程序员以外，新的硬件、新的高性能运算需求（如深度学习）、新的运算场景（分布式计算）的涌现，都意味着需要新的系统架构师、系统软件开发者来搭建新的开发平台和生态。而这些自然都离不开系统方向的基础知识。事实上，在学过系统方向的课程后会发现，体系结构、编译器、OS三者紧密相连，需要相互配合。

而除了上面这些实用性的考量外，最重要的是，通过计算机系统的学习，计算机的黑盒将完全打开对你不再有秘密。相信这对任何一个热爱计算机的同学来说都是无上的乐趣。对于一名计算机专业的学生来说学完科学方向理解了什么是计算，学完系统方向理解了计算是如何通过计算机实现的，那么便称得上功夫到家了。

## 课程内容概述

### 编译原理

将学习编译器是如何实现的，并亲手实现一个编译器。总体来说课程内容包括两部分，转译高级语言、优化代码。课程内容即是对这两部分具体拆解，引导大家逐步实现一个编译器。总体来说没有很多复杂的概念，可以理解主体就是一个大项目，然后逐步功能分解并实现。相应的实验对工程能力要求比较高，这也是系统方向的特点。

课程考核主要由实验（即实现的编译器）和考试组成，少部分来自作业、签到等平时分，一般实验扣分占比较多。

### 计算机体系结构

讲解现代处理器的构造，单周期CPU和五段流水就是一个简单的例子。在这门课中还会涉及更多现代处理器（包括CPU和其他处理器，以及异构计算系统）的构造。不同于计算机组成课涉及具体电路实现，计算机体系结构更加注重架构设计，具体的电路实现方式在有了计算机组成的基础的情况下一般不难想到。除了处理器以外，计算机体系结构还涉及存储部件的设计和部件间的通信。

课程考核包括若干次实验，两次pre以及考试。实验主要涉及计算机系统的仿真，以及改进程序性能。实验涉及的都是几十行的小程序，并不复杂。两次pre内容是针对计算机体系结构方向的调研，以论文阅读（期中1篇，期末同一topic下的3-4篇）和讲解为主。


### 智能计算系统

课程主要讲解计算机系统的技术是如何用到AI上的。内容包括对神经网络的介绍，深度学习开发框架及基本算子设计的介绍、AI专用芯片的介绍、AI算法系统角度的优化。这门课是一门实用性很强的课，与系统方向当前前沿的研究关系密切，从这点看有利于希望继续在系统方向深造的同学，在保研联系导师或申请相关科研机会中都有帮助。

从难度上看，由于这门课应用性质较强，在有一些系统课程基础（计算机组成原理、计算机体系结构）的情况下并不算太难。对于不了解AI的同学来说，可能课程介绍的一些简单的神经网络与很多现在AI系统的问题（如大模型分布式训练）稍有脱节，可以课余针对课程中陌生的名词通过公众号、知乎、博客等进行一些扩展阅读。

课程考核以实验和期末考试为主。由于新课仍在设计改进中，上学期第一次开课，结课后我们几个学生和老师、助教以及提供实验系统的华为方负责人有过关于课程建议的研讨，预计新学期实验内容会有更新。

### 计算机系统大实验

造一台计算机，实验材料参考https://github.com/nju-mips。实验会使用抽象程度更好的chisel进行开发，相比verilog体验上更贴近使用支持面向对象的高级语言进行软件开发，可以免去不少麻烦。同时可以两人合作，按经验如不考虑大量的优化，每周一般需要一到两天左右的开发时间（实际情况可以看我们的git commit记录


